<?xml version="1.0" encoding="UTF-8"?><!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Strict//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-strict.dtd"><html xmlns="http://www.w3.org/1999/xhtml" lang="ko"><head><meta http-equiv="Content-Type" content="text/html;charset=UTF-8"/><link rel="stylesheet" href="../jacoco-resources/report.css" type="text/css"/><link rel="shortcut icon" href="../jacoco-resources/report.gif" type="image/gif"/><title>MenuOverlay.java</title><link rel="stylesheet" href="../jacoco-resources/prettify.css" type="text/css"/><script type="text/javascript" src="../jacoco-resources/prettify.js"></script></head><body onload="window['PR_TAB_WIDTH']=4;prettyPrint()"><div class="breadcrumb" id="breadcrumb"><span class="info"><a href="../jacoco-sessions.html" class="el_session">Sessions</a></span><a href="../index.html" class="el_report">tetris</a> &gt; <a href="index.source.html" class="el_package">com.example.game.component</a> &gt; <span class="el_source">MenuOverlay.java</span></div><h1>MenuOverlay.java</h1><pre class="source lang-java linenums">package com.example.game.component;

import javafx.geometry.Insets;
import javafx.geometry.Pos;
import javafx.scene.control.Button;
import javafx.scene.layout.StackPane;
import javafx.scene.layout.VBox;
import javafx.scene.paint.Color;
import javafx.scene.shape.Rectangle;
import javafx.scene.text.Font;
import javafx.scene.text.FontWeight;
import javafx.scene.text.Text;

public class MenuOverlay {
    
<span class="nc" id="L16">    public enum MenuType {</span>
<span class="nc" id="L17">        PAUSE_MENU,</span>
<span class="nc" id="L18">        GAME_OVER_MENU,</span>
<span class="nc" id="L19">        SETTINGS_MENU</span>
    }
    
    private StackPane overlay;
    private VBox menuContainer;
    private Rectangle background;
    
    // 콜백 인터페이스
    public interface MenuCallback {
        void onResume();
        void onRestart();
        void onSettings();
        void onMainMenu();
        void onExit();
    }
    
<span class="nc" id="L35">    public MenuOverlay() {</span>
<span class="nc" id="L36">        createOverlay();</span>
<span class="nc" id="L37">    }</span>
    
    private void createOverlay() {
<span class="nc" id="L40">        overlay = new StackPane();</span>
<span class="nc" id="L41">        overlay.setVisible(false);</span>
        
        // 반투명 배경
<span class="nc" id="L44">        background = new Rectangle();</span>
<span class="nc" id="L45">        background.setFill(Color.color(0, 0, 0, 0.8));</span>
<span class="nc" id="L46">        background.widthProperty().bind(overlay.widthProperty());</span>
<span class="nc" id="L47">        background.heightProperty().bind(overlay.heightProperty());</span>
        
        // 메뉴 컨테이너
<span class="nc" id="L50">        menuContainer = new VBox(15);</span>
<span class="nc" id="L51">        menuContainer.setAlignment(Pos.CENTER);</span>
<span class="nc" id="L52">        menuContainer.setPadding(new Insets(40));</span>
<span class="nc" id="L53">        menuContainer.getStyleClass().add(&quot;menu-overlay&quot;);</span>
        
<span class="nc" id="L55">        overlay.getChildren().addAll(background, menuContainer);</span>
<span class="nc" id="L56">    }</span>
    
    public void showPauseMenu(MenuCallback callback) {
<span class="nc" id="L59">        showMenu(MenuType.PAUSE_MENU, callback, null);</span>
<span class="nc" id="L60">    }</span>
    
    public void showGameOverMenu(MenuCallback callback, int finalScore) {
<span class="nc" id="L63">        showMenu(MenuType.GAME_OVER_MENU, callback, finalScore);</span>
<span class="nc" id="L64">    }</span>
    
    public void showSettingsMenu(MenuCallback callback) {
<span class="nc" id="L67">        showMenu(MenuType.SETTINGS_MENU, callback, null);</span>
<span class="nc" id="L68">    }</span>
    
    private void showMenu(MenuType menuType, MenuCallback callback, Integer finalScore) {
<span class="nc" id="L71">        menuContainer.getChildren().clear();</span>
        
        // 타이틀
<span class="nc" id="L74">        Text title = createTitle(menuType, finalScore);</span>
<span class="nc" id="L75">        menuContainer.getChildren().add(title);</span>
        
        // 버튼들
<span class="nc bnc" id="L78" title="All 4 branches missed.">        switch (menuType) {</span>
            case PAUSE_MENU:
<span class="nc" id="L80">                addPauseMenuButtons(callback);</span>
<span class="nc" id="L81">                break;</span>
            case GAME_OVER_MENU:
<span class="nc" id="L83">                addGameOverMenuButtons(callback);</span>
<span class="nc" id="L84">                break;</span>
            case SETTINGS_MENU:
<span class="nc" id="L86">                addSettingsMenuButtons(callback);</span>
                break;
        }
        
<span class="nc" id="L90">        overlay.setVisible(true);</span>
<span class="nc" id="L91">        overlay.toFront();</span>
<span class="nc" id="L92">    }</span>
    
    private Text createTitle(MenuType menuType, Integer finalScore) {
<span class="nc" id="L95">        Text title = new Text();</span>
<span class="nc" id="L96">        title.getStyleClass().add(&quot;menu-title&quot;);</span>
<span class="nc" id="L97">        title.setFont(Font.font(&quot;Arial&quot;, FontWeight.BOLD, 32));</span>
<span class="nc" id="L98">        title.setFill(Color.WHITE);</span>
        
<span class="nc bnc" id="L100" title="All 4 branches missed.">        switch (menuType) {</span>
            case PAUSE_MENU:
<span class="nc" id="L102">                title.setText(&quot;PAUSED&quot;);</span>
<span class="nc" id="L103">                break;</span>
            case GAME_OVER_MENU:
<span class="nc" id="L105">                title.setText(&quot;GAME OVER&quot;);</span>
<span class="nc bnc" id="L106" title="All 2 branches missed.">                if (finalScore != null) {</span>
<span class="nc" id="L107">                    Text scoreText = new Text(&quot;Final Score: &quot; + String.format(&quot;%,d&quot;, finalScore));</span>
<span class="nc" id="L108">                    scoreText.getStyleClass().add(&quot;menu-score&quot;);</span>
<span class="nc" id="L109">                    scoreText.setFont(Font.font(&quot;Arial&quot;, FontWeight.NORMAL, 18));</span>
<span class="nc" id="L110">                    scoreText.setFill(Color.LIGHTGRAY);</span>
                    
<span class="nc" id="L112">                    VBox titleContainer = new VBox(10);</span>
<span class="nc" id="L113">                    titleContainer.setAlignment(Pos.CENTER);</span>
<span class="nc" id="L114">                    titleContainer.getChildren().addAll(title, scoreText);</span>
                    
<span class="nc" id="L116">                    menuContainer.getChildren().add(titleContainer);</span>
<span class="nc" id="L117">                    return new Text(); // 빈 텍스트 반환 (이미 컨테이너에 추가됨)</span>
                }
                break;
            case SETTINGS_MENU:
<span class="nc" id="L121">                title.setText(&quot;SETTINGS&quot;);</span>
                break;
        }
        
<span class="nc" id="L125">        return title;</span>
    }
    
    private void addPauseMenuButtons(MenuCallback callback) {
<span class="nc" id="L129">        Button resumeBtn = createMenuButton(&quot;Resume&quot;, () -&gt; {</span>
<span class="nc" id="L130">            hide();</span>
<span class="nc" id="L131">            callback.onResume();</span>
<span class="nc" id="L132">        });</span>
        
<span class="nc" id="L134">        Button settingsBtn = createMenuButton(&quot;Settings&quot;, () -&gt; {</span>
<span class="nc" id="L135">            callback.onSettings();</span>
<span class="nc" id="L136">        });</span>
        
<span class="nc" id="L138">        Button restartBtn = createMenuButton(&quot;Restart&quot;, () -&gt; {</span>
<span class="nc" id="L139">            hide();</span>
<span class="nc" id="L140">            callback.onRestart();</span>
<span class="nc" id="L141">        });</span>
        
<span class="nc" id="L143">        Button mainMenuBtn = createMenuButton(&quot;Main Menu&quot;, () -&gt; {</span>
<span class="nc" id="L144">            hide();</span>
<span class="nc" id="L145">            callback.onMainMenu();</span>
<span class="nc" id="L146">        });</span>
        
<span class="nc" id="L148">        menuContainer.getChildren().addAll(resumeBtn, settingsBtn, restartBtn, mainMenuBtn);</span>
<span class="nc" id="L149">    }</span>
    
    private void addGameOverMenuButtons(MenuCallback callback) {
<span class="nc" id="L152">        Button restartBtn = createMenuButton(&quot;Play Again&quot;, () -&gt; {</span>
<span class="nc" id="L153">            hide();</span>
<span class="nc" id="L154">            callback.onRestart();</span>
<span class="nc" id="L155">        });</span>
        
<span class="nc" id="L157">        Button mainMenuBtn = createMenuButton(&quot;Main Menu&quot;, () -&gt; {</span>
<span class="nc" id="L158">            hide();</span>
<span class="nc" id="L159">            callback.onMainMenu();</span>
<span class="nc" id="L160">        });</span>
        
<span class="nc" id="L162">        Button exitBtn = createMenuButton(&quot;Exit&quot;, () -&gt; {</span>
<span class="nc" id="L163">            callback.onExit();</span>
<span class="nc" id="L164">        });</span>
        
<span class="nc" id="L166">        menuContainer.getChildren().addAll(restartBtn, mainMenuBtn, exitBtn);</span>
<span class="nc" id="L167">    }</span>
    
    private void addSettingsMenuButtons(MenuCallback callback) {
        // 설정 옵션들을 여기에 추가할 수 있습니다
<span class="nc" id="L171">        Button colorSchemeBtn = createMenuButton(&quot;Color Scheme&quot;, () -&gt; {</span>
            // 컬러 스킴 변경 로직
<span class="nc" id="L173">        });</span>
        
<span class="nc" id="L175">        Button controlsBtn = createMenuButton(&quot;Controls&quot;, () -&gt; {</span>
            // 컨트롤 설정 로직
<span class="nc" id="L177">        });</span>
        
<span class="nc" id="L179">        Button backBtn = createMenuButton(&quot;Back&quot;, () -&gt; {</span>
<span class="nc" id="L180">            hide();</span>
<span class="nc" id="L181">            callback.onResume();</span>
<span class="nc" id="L182">        });</span>
        
<span class="nc" id="L184">        menuContainer.getChildren().addAll(colorSchemeBtn, controlsBtn, backBtn);</span>
<span class="nc" id="L185">    }</span>
    
    private Button createMenuButton(String text, Runnable action) {
<span class="nc" id="L188">        Button button = new Button(text);</span>
<span class="nc" id="L189">        button.getStyleClass().add(&quot;menu-button&quot;);</span>
<span class="nc" id="L190">        button.setPrefWidth(200);</span>
<span class="nc" id="L191">        button.setPrefHeight(50);</span>
<span class="nc" id="L192">        button.setOnAction(e -&gt; action.run());</span>
        
        // 호버 효과
<span class="nc" id="L195">        button.setOnMouseEntered(e -&gt; button.setStyle(&quot;-fx-background-color: #3bb78f; -fx-text-fill: white;&quot;));</span>
<span class="nc" id="L196">        button.setOnMouseExited(e -&gt; button.setStyle(&quot;&quot;));</span>
        
<span class="nc" id="L198">        return button;</span>
    }
    
    public void hide() {
<span class="nc" id="L202">        overlay.setVisible(false);</span>
<span class="nc" id="L203">    }</span>
    
    public StackPane getOverlay() {
<span class="nc" id="L206">        return overlay;</span>
    }
    
    public boolean isVisible() {
<span class="nc" id="L210">        return overlay.isVisible();</span>
    }
}
</pre><div class="footer"><span class="right">Created with <a href="http://www.jacoco.org/jacoco">JaCoCo</a> 0.8.8.202204050719</span></div></body></html>